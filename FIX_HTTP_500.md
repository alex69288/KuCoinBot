# Исправление ошибки HTTP 500 на Amvera

## Проблема
При развертывании на Amvera возникала ошибка HTTP 500 из-за того, что `start.py` требовал обязательного наличия всех переменных окружения (API ключи KuCoin, Telegram токен и т.д.) на этапе запуска сервера.

## Решение
Создан упрощенный файл `webapp_only.py`, который:
- Запускает только Web App интерфейс без торгового бота
- Не требует переменных окружения на этапе запуска
- Позволяет настроить и запустить бота позже через веб-интерфейс

## Изменения

### 1. Создан новый файл `webapp_only.py`
Упрощенный запуск, который:
- Импортирует только необходимые модули (uvicorn, fastapi)
- Запускает Web App на порту 8000
- Показывает информацию о необходимых переменных окружения

### 2. Обновлен `amvera.yml`
```yaml
run:
  scriptName: webapp_only.py  # Вместо start.py
```

## Инструкции по развертыванию

### 1. Закоммитьте изменения
```bash
git add .
git commit -m "[v1.0.0] Исправление HTTP 500: упрощенный запуск Web App"
git push
```

### 2. Перезапустите сервис на Amvera
- Зайдите в панель управления Amvera
- Перезапустите проект
- Web App должен запуститься успешно

### 3. Настройте переменные окружения (опционально)
Если хотите запустить торговый бот, добавьте переменные в Amvera:
- `KUCOIN_API_KEY` - API ключ KuCoin
- `KUCOIN_SECRET_KEY` - Secret ключ KuCoin
- `KUCOIN_PASSPHRASE` - Passphrase для API
- `TELEGRAM_BOT_TOKEN` - Токен Telegram бота
- `TELEGRAM_CHAT_ID` - ID чата для уведомлений

### 4. Запустите бота через Web App
После настройки переменных окружения, торговый бот можно запустить через веб-интерфейс.

## Альтернативный вариант (полный запуск)
Если хотите запускать бота сразу при старте сервера:
1. Настройте все переменные окружения в Amvera
2. Измените `amvera.yml`:
   ```yaml
   run:
     scriptName: start.py
   ```
3. Перезапустите сервис

## Проверка работоспособности
Запустите тест локально:
```bash
python tests/test_webapp_only.py
```

## Дата исправления
11 ноября 2025 г.
