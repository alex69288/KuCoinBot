"""
–ö–†–ê–¢–ö–ê–Ø –°–í–û–î–ö–ê –ò–ó–ú–ï–ù–ï–ù–ò–ô - –°–ò–°–¢–ï–ú–ê –ú–ù–û–ñ–ï–°–¢–í–ï–ù–ù–´–• –ü–û–ó–ò–¶–ò–ô

‚úÖ –ß–¢–û –°–î–ï–õ–ê–ù–û:

1. –ú–ò–ì–†–ê–¶–ò–Ø –°–¢–†–£–ö–¢–£–†–´ position_state.json
   - –°—Ç–∞—Ä–∞—è: –æ–¥–Ω–∞ –ø–æ–∑–∏—Ü–∏—è –Ω–∞ –ø–∞—Ä—É
   - –ù–æ–≤–∞—è: –º–∞—Å—Å–∏–≤ positions —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ –ø–æ–∫—É–ø–∫–∞–º–∏
   
2. –î–û–ë–ê–í–õ–ï–ù–´ –î–í–ï –ü–û–ó–ò–¶–ò–ò BTC/USDT:
   - –ü–æ–∑–∏—Ü–∏—è #1: 110,185.7 USDT @ 1.1 USDT (02.11.2025 00:40)
   - –ü–æ–∑–∏—Ü–∏—è #2: 103,573.5 USDT @ 1.0 USDT (05.11.2025 19:41)
   
3. –õ–û–ì–ò–ö–ê –†–ê–°–ß–ï–¢–ê TAKE PROFIT:
   - –ü—Ä–∏ 2+ –ø–æ–∑–∏—Ü–∏—è—Ö: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–ê–Ø —Ü–µ–Ω–∞ –≤—Ö–æ–¥–∞
   - –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –Ω–µ –ø—Ä–æ–¥–∞–¥–∏–º –≤ –º–∏–Ω—É—Å
   - max_entry_price = 110,185.7 USDT
   
4. –†–ê–°–ß–ï–¢ –°–¢–ê–í–ö–ò:
   - –ü—Ä–∏ 2+ –ø–æ–∑–∏—Ü–∏—è—Ö: —Å—É–º–º–∞ –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π
   - –û–±—â–∞—è —Å—Ç–∞–≤–∫–∞ = 2.1 USDT
   
5. –ü–û–î–°–ß–ï–¢ –ü–û–ó–ò–¶–ò–ô:
   - –¢–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–æ–∫—É–ø–æ–∫
   - –ë—É–¥–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å "2 –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏"

üìã –°–¢–†–£–ö–¢–£–†–ê position_state.json:
{
  "BTC/USDT": {
    "positions": [
      {"id": 1, "entry_price": 110185.7, "position_size_usdt": 1.1, ...},
      {"id": 2, "entry_price": 103573.5, "position_size_usdt": 1.0, ...}
    ],
    "total_position_size_usdt": 2.1,
    "average_entry_price": 106934.85,
    "max_entry_price": 110185.7,  // ‚Üê –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è TP!
    "total_amount_crypto": 0.00001964,
    "next_position_id": 3
  }
}

üîÆ –ö–ê–ö –ë–£–î–ï–¢ –†–ê–ë–û–¢–ê–¢–¨ –î–ê–õ–¨–®–ï:

1. –ù–û–í–ê–Ø –ü–û–ö–£–ü–ö–ê:
   - –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –º–∞—Å—Å–∏–≤ positions —Å id=3
   - –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è total, average, max
   
2. –°–ò–ì–ù–ê–õ –ù–ê –ü–†–û–î–ê–ñ–£:
   - –ü—Ä–æ–¥–∞—é—Ç—Å—è –í–°–ï –ø–æ–∑–∏—Ü–∏–∏ —Å—Ä–∞–∑—É (2.1 USDT)
   - Take Profit —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –æ—Ç max_entry_price (110185.7)
   - –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –ø—Ä–∏–±—ã–ª—å –ø–æ –≤—Å–µ–º –ø–æ–∑–∏—Ü–∏—è–º
   
3. –û–¢–û–ë–†–ê–ñ–ï–ù–ò–ï –í TELEGRAM:
   - "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π: 2"
   - "–†–∞–∑–º–µ—Ä —Å—Ç–∞–≤–∫–∏: 2.10 USDT"
   - "–¶–µ–Ω–∞ –≤—Ö–æ–¥–∞ (TP): 110,185.70 USDT"
"""

print(__doc__)

# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
import json

with open('position_state.json', 'r') as f:
    state = json.load(f)

btc = state['BTC/USDT']
print("\n" + "=" * 70)
print("–¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï BTC/USDT")
print("=" * 70)
print(f"\nüìä –û—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π: {len(btc['positions'])}")
print(f"üí∞ –û–±—â–∞—è —Å—Ç–∞–≤–∫–∞: {btc['total_position_size_usdt']:.2f} USDT")
print(f"üìà –°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞: {btc['average_entry_price']:,.2f} USDT")
print(f"‚ö†Ô∏è  –¶–µ–Ω–∞ –¥–ª—è TP: {btc['max_entry_price']:,.2f} USDT")
print(f"‚Çø  –í—Å–µ–≥–æ BTC: {btc['total_amount_crypto']:.8f}")

print("\nüìã –î–µ—Ç–∞–ª–∏ –ø–æ–∑–∏—Ü–∏–π:")
for pos in btc['positions']:
    print(f"\n  –ü–æ–∑–∏—Ü–∏—è #{pos['id']}:")
    print(f"  ‚îú –¶–µ–Ω–∞ –≤—Ö–æ–¥–∞: {pos['entry_price']:,.2f} USDT")
    print(f"  ‚îú –†–∞–∑–º–µ—Ä: {pos['position_size_usdt']:.2f} USDT")
    print(f"  ‚îî –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: {pos['amount_crypto']:.8f} BTC")

print("\n" + "=" * 70)
